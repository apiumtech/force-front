<!-- begin breadcrumb -->
<ol class="breadcrumb">
    <li><a href="javascript:;">Home</a></li>
    <li class="active">Calendar</li>
</ol>
<!-- end breadcrumb -->
<!-- begin page-header -->
<h1 class="page-header">
    <i class="fa ic-agenda"></i> Agenda,
    <small>My agenda</small>
    <div class="btn-group pull-right">
        <a href="javascript:;" data-toggle="dropdown" class="btn btn-big btn-white dropdown-toggle">
            Create <span class="caret m-l-5"></span>
        </a>
        <ul class="dropdown-menu pull-right">
            <li><a href="javascript:;">Event</a></li>
            <li><a href="javascript:;">Task</a></li>
        </ul>
    </div>
</h1>
<!-- end page-header -->
<div class="line-border clearfix m-b-20"></div>
<!-- begin panel -->
<div class="panel panel-inverse">
    <div class="panel-heading">
        <div class="panel-heading-btn">
            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-default" data-click="panel-expand"><i
                    class="fa fa-expand"></i></a>
            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-success" data-click="panel-reload"><i
                    class="fa fa-repeat"></i></a>
            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-warning" data-click="panel-collapse"><i
                    class="fa fa-minus"></i></a>
            <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-danger" data-click="panel-remove"><i
                    class="fa fa-times"></i></a>
        </div>
        <h4 class="panel-title">Calendar</h4>
    </div>
    <div class="panel-body p-0">
        <div class="vertical-box">
            <div class="vertical-box-column p-15 bg-silver width-sm">
                <div id="external-events" class="calendar-event">
                    <h4 class=" m-b-20">Draggable Events</h4>

                    <div class="external-event bg-purple" data-bg="bg-purple" data-title="Discussion"
                         data-media="<i class='fa fa-comments'></i>"
                         data-desc="Lorem ipsum dolor sit amet, consectetur adipiscing elit.">
                        <h5><i class="fa fa-comments fa-lg fa-fw"></i> Discussion</h5>

                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                    </div>
                    <div class="external-event bg-blue" data-bg="bg-blue" data-title="Dinner"
                         data-media="<i class='fa fa-cutlery'></i>"
                         data-desc="Cum sociis natoque penatibus et magnis dis parturient montes.">
                        <h5><i class="fa fa-cutlery fa-lg fa-fw"></i> Dinner</h5>

                        <p>Cum sociis natoque penatibus et magnis dis parturient montes.</p>
                    </div>
                    <div class="external-event bg-green" data-bg="bg-green" data-title="Brainstorming"
                         data-media="<i class='fa fa-lightbulb-o'></i>"
                         data-desc="Mauris tristique massa eu venenatis semper. Phasellus a nibh nisi.">
                        <h5><i class="fa fa-lightbulb-o fa-lg fa-fw"></i> Brainstorming</h5>

                        <p>Mauris tristique massa eu venenatis semper. Phasellus a nibh nisi.</p>
                    </div>
                    <div class="external-event bg-orange" data-bg="bg-orange" data-title="Performance Rating"
                         data-media="<i class='fa fa-tasks'></i>"
                         data-desc="Class aptent taciti sociosqu ad litora torquent per conubia nostra.">
                        <h5><i class="fa fa-tasks fa-lg fa-fw"></i> Performance Rating</h5>

                        <p>Class aptent taciti sociosqu ad litora torquent per conubia nostra.</p>
                    </div>
                    <div class="external-event bg-red" data-bg="bg-red" data-title="Video Shooting"
                         data-media="<i class='fa fa-video-camera'></i>"
                         data-desc="Donec ligula nisi, tempus eu egestas id, auctor sit amet velit.">
                        <h5><i class="fa fa-video-camera fa-lg fa-fw"></i> Video Shooting</h5>

                        <p>Donec ligula nisi, tempus eu egestas id, auctor sit amet velit.</p>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="checkbox" id="drop-remove"/>
                            remove after drop
                        </label>
                    </div>
                </div>
            </div>
            <div id="calendar" class="vertical-box-column p-15 calendar"></div>
        </div>
    </div>
</div>
<!-- end panel -->

<script src="node_modules/fullcalendar/dist/fullcalendar.min.js"></script>
<script>
    var buttonSetting = {left: 'today prev,next ', center: 'title', right: 'month,agendaWeek,agendaDay'};
    var date = new Date();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
        header: buttonSetting,
        selectable: true,
        selectHelper: true,
        droppable: true,
        drop: function(date, allDay) { // this function is called when something is dropped

            // retrieve the dropped element's stored Event Object
            var originalEventObject = $(this).data('eventObject');

            // we need to copy it, so that multiple events don't have a reference to the same object
            var copiedEventObject = $.extend({}, originalEventObject);

            // assign it the date that was reported
            copiedEventObject.start = date;
            copiedEventObject.allDay = allDay;

            // render the event on the calendar
            // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
            $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

            // is the "remove after drop" checkbox checked?
            if ($('#drop-remove').is(':checked')) {
                // if so, remove the element from the "Draggable Events" list
                $(this).remove();
            }

        },
        select: function(start, end, allDay) {
            var title = prompt('Event Title:');
            if (title) {
                calendar.fullCalendar('renderEvent',
                        {
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                        true // make the event "stick"
                );
            }
            calendar.fullCalendar('unselect');
        },
        eventRender: function(event, element, calEvent) {
            var mediaObject = (event.media) ? event.media : '';
            var description = (event.description) ? event.description : '';
            element.find(".fc-event-title").after($("<span class=\"fc-event-icons\"></span>").html(mediaObject));
            element.find(".fc-event-title").append('<small>'+ description +'</small>');
        },
        editable: true,
        events: [
            {
                title: 'Event',
                start: new Date(y, m, 0),
                end: new Date(y, m, 1),
                className: 'bg-purple',
                media: '<i class="fa fa-trophy"></i>',
                description: 'Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.'
            },
            {
                title: 'Daily Meeting',
                start: new Date(y, m, 10),
                end: new Date(y, m, 12),
                allDay: false,
                className: 'bg-blue',
                media: '<i class="fa fa-users"></i>',
                description: 'Lorem ipsum dolor sit amet adipiscing elit.'
            },
            {
                title: 'Click for Google',
                start: new Date(y, m, 15),
                end: new Date(y, m, 17),
                url: 'http://google.com/',
                className: 'bg-green',
                media: '<i class="fa fa-google-plus"></i>',
                description: 'Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos.'
            }
        ]
    });

    /* initialize the external events
     -----------------------------------------------------------------*/
    $('#external-events .external-event').each(function() {
        var eventObject = {
            title: $.trim($(this).attr('data-title')),
            className: $(this).attr('data-bg'),
            media: $(this).attr('data-media'),
            description: $(this).attr('data-desc')
        };

        $(this).data('eventObject', eventObject);

        $(this).draggable({
            zIndex: 999,
            revert: true,
            revertDuration: 0
        });
    });
</script>