<div ng-controller="SalesAnalyticsFilterController"
     ng-init="fn.initializeFilters()"
     class="row filters-div sales-filters-div">

    <div class="col-md-12">
        <div class="row m-b-5">
            <div class="col-md-9 ">
                <h6>
                    {{'Filters.FilterBy' | i18next}}</h6>
                <ul class="nav navbar-nav row row m-t-10">
                    <li class="dropdown" dropdown is-ope="userFilterOpened">
                        <a id="drop1"
                           href="javascript:"
                           class="dropdown-toggle m-r-30"
                           dropdown-toggle>
                            {{'Filters.AllUsers' | i18next}}
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu media-list animated fadeInDown width-md"
                            ng-click="$event.stopPropagation()">
                            <span class="panel-loading isLoading" ng-if="data.isLoadingUsers">
                                <i class="spinner"></i>
                             </span>

                            <!-- search users -->
                            <li class="m-t-10 m-b-10">
                                <form>
                                    <input type="text" class="form-control ic-user"
                                           ng-model="searchingUser"
                                           ng-change="fn.getFilteredUsersList()"
                                           ng-click="$event.stopPropagation()"
                                           ng-i18next="[placeholder]Filters.SearchOwner">
                                </form>
                            </li>
                            <!-- END search users -->
                            <li class="media">
                                <div class="btn-group pull-right">

                                    <button class="btn btn-white btn-sm"
                                            ng-class="{'active': currentUserFilterGroup=='Environment'}"
                                            ng-click="fn.searchUsersByTeam($event)">
                                        {{'Filters.Environment' | i18next}}
                                    </button>

                                    <button class="btn btn-white btn-sm"
                                            ng-class="{'active': currentUserFilterGroup=='Hierarqhy'}"

                                            ng-click="fn.searchUsersByHierarchy($event)">
                                        {{'Filters.Team' | i18next}}
                                    </button>
                                </div>
                                <span class="pull-right m-t-5">{{'commonText.Show' | i18next}}</span></li>
                            <!-- recent added users -->
                            <li class="media hide">
                                <h6>{{'Filters.RecentSelected' | i18next}}</h6>
                                <input type="checkbox" class="pull-left m-t-10 m-r-10 ">


                                <div class="pull-left m-t-5">
                                    <strong>{{'Filters.AllUsers' | i18next}}</strong></div>
                            </li>
                            <!-- END recent added users -->
                            <!-- Starts users tree -->
                            <li class="users-tree">
                                <div class="clearfix hide">
                                    <input type="checkbox" class="pull-left m-t-10 m-r-10"
                                           ng-model="allUsersSelected"
                                           ng-click="fn.allUserSelectionChanged($event)">

                                    <div class="m-t-5 pull-left">
                                        <strong>{{'Filters.AllUserSelectsAllEnvironments' | i18next}}</strong>
                                    </div>
                                </div>

                                <ng-include
                                        src="'app/modules/saleAnalytics/filters/'+currentUserFilterGroup+'UsersFilter.html'"></ng-include>
                            </li>
                            <!-- END users tree -->
                        </ul>
                    </li>

                    <li>
                        <span class="pull-left date-range m-r-10">
                            {{'Filters.DateRange' | i18next}}
                        </span>

                        <div class="input-group " style="width:300px; margin-bottom: 4px; "
                             ng-click="fn.closeDatePickers($event);"
                                >

                            <input type="text" class="form-control"
                                   ng-keypress="$event.preventDefault()"
                                   ng-click="dateRangeFilterOpened=!dateRangeFilterOpened"
                                   ng-attr-placeholder="{{dateRangePlaceholder}}">

                            <div class="input-group-btn"
                                 dropdown
                                 is-open="dateRangeFilterOpened"
                                 on-toggle="fn.dateFilterToggled(open)"
                                 dropdown-toggle>
                                <ul class="dropdown-menu media-list pull-right haveDatePicker animated fadeInDown"
                                    ng-click="fn.closeDatePickers($event);"
                                    style="width:300px; max-width:300px;">
                                    <li><h6 class="m-t-20">{{'Filters.SelectDateRange' | i18next}}</h6></li>
                                    <li class="divider"></li>
                                    <li>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <p>{{'Filters.Customized' | i18next}}</p></div>
                                            <div class="col-md-12">
                                                <div class="input-group input-daterange">
                                                    <force-date-picker
                                                            date-set="{{isoStringDateStart()}}"
                                                            date-max-limit="{{isoStringMaxDateFromLimit()}}"
                                                            year-range="2"
                                                            date-format="{{datePickerFormat}}">
                                                        <input type="text" class="form-control" name="start"
                                                               ng-model="displayDateStart"/>
                                                    </force-date-picker>
                                                    <span class="input-group-addon">{{'Filters.To' | i18next}}</span>
                                                    <force-date-picker
                                                            date-set={{isoStringDateEnd()}}
                                                            year-range="2"
                                                            date-min-limit="{{isoStringDateEndLimit()}}"
                                                            date-max-limit="{{isoStringMaxDateLimit()}}"
                                                            date-format="{{datePickerFormat}}">
                                                        <input type="text" class="form-control" name="end"
                                                               ng-model="displayDateEnd"/>
                                                    </force-date-picker>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="divider"></li>
                                    <li class="m-t-10 m-b-5 text-link" ng-repeat="range in dateOptionRange">
                                        <a ng-click="fn.loadPreviousLastDaysFilter(range, $event)">
                                            {{'Filters.LastxxDays' | i18next:{xx: range} }}
                                        </a>
                                    </li>

                                    <li class="divider"></li>
                                    <li class="m-t-10 m-b-5 text-link clearfix">
                                        <a class="btn btn-default btn-sm pull-left"
                                           ng-click="fn.applyDateFilter()">
                                            {{'commonText.Apply' | i18next}}
                                        </a>
                                        <a class="pull-left m-l-10 m-t-5"
                                           ng-click="fn.cancelFilter()">
                                            {{'commonText.Cancel' | i18next}}
                                        </a>
                                    </li>
                                </ul>
                                <button type="button" class="btn btn-primary  btn-sm dropdown-toggle"
                                        data-toggle="dropdown">
                                    <span class="caret"></span>
                                </button>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <!-- end filters-div -->
        <div class="line-border clearfix m-b-30 "></div>
    </div>
</div>