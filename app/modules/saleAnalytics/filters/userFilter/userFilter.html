<ul class="nav navbar-nav row row m-t-10"
    ng-controller="UserFilterController"
    ng-init="fn.initializeFilters(multipleSelection)">

    <li class="dropdown" dropdown is-open="userFilterOpened" on-toggle="fn.toggled(open)">


        <!-- COMPONENT DROPDOWN -->

        <a id="UserFilterDropDownButton"
           href="javascript:"
           class="dropdown-toggle m-r-30"
           dropdown-toggle>
            <span ng-if="multipleSelection">
                {{'Filters.AllUsers' | i18next}}
            </span>
            <span ng-if="!multipleSelection">
                User: <span ng-if="currentSelectedUser">{{currentSelectedUser}}</span> <span ng-if="!currentSelectedUser">None</span>
            </span>
            <span class="caret"></span>
        </a>


        <!-- COMPONENT -->

        <ul id="UserFilterDropDown" class="dropdown-menu media-list animated fadeInDown width-md"
            onmouseover="document.body.style.overflow='hidden';" onmouseout="document.body.style.overflow='auto';"
            ng-click="$event.stopPropagation()">

            <span class="panel-loading isLoading" ng-if="data.isLoadingUsers">
                <i class="spinner"></i>
             </span>


            <!-- search users -->
            <li class="m-t-10 m-b-10">
                <form>
                    <input type="text" class="form-control ic-user"
                           ng-model="searchingUser"
                           ng-change="fn.getFilteredUsersList()"
                           ng-click="$event.stopPropagation()"
                           ng-i18next="[placeholder]Filters.SearchOwner">
                    <i class="fa ic-search search_owner_icon"></i>
                </form>
            </li>
            <!-- END search users -->


            <!-- Buttonbar -->
            <li class="media">
                <div class="btn-group pull-right">

                    <button class="btn btn-white btn-sm"
                            ng-class="{'active': currentUserFilterGroup=='Environment'}"
                            ng-click="fn.searchUsersByTeam($event)">
                        {{'Filters.Environment' | i18next}}
                    </button>

                    <button class="btn btn-white btn-sm"
                            ng-class="{'active': currentUserFilterGroup=='Hierarqhy'}"

                            ng-click="fn.searchUsersByHierarchy($event)">
                        {{'Filters.Team' | i18next}}
                    </button>
                </div>
                <span class="pull-right m-t-7">{{'commonText.Show' | i18next}}</span>
            </li>
            <!-- End Buttonbar -->


            <!-- recent added users -->
            <li class="media hide">
                <h6>{{'Filters.RecentSelected' | i18next}}</h6>
                <input type="checkbox" class="pull-left m-t-10 m-r-10 ">


                <div class="pull-left m-t-5">
                    <strong>{{'Filters.AllUsers' | i18next}}</strong></div>
            </li>
            <!-- END recent added users -->


            <!-- Starts users tree -->
            <li class="users-tree">
                <div class="clearfix hide">
                    <input type="checkbox" class="pull-left m-t-10 m-r-10"
                           ng-model="allUsersSelected"
                           ng-click="fn.allUserSelectionChanged($event)">

                    <div class="m-t-5 pull-left">
                        <strong>{{'Filters.AllUserSelectsAllEnvironments' | i18next}}</strong>
                    </div>
                </div>

                <ng-include ng-if="multipleSelection"
                            src="'app/modules/saleAnalytics/filters/userFilter/'+currentUserFilterGroup+'UsersFilter.html'"></ng-include>

                <ng-include ng-if="!multipleSelection"
                            src="'app/modules/saleAnalytics/filters/userFilter/HierarqhyUsersFilter.html'"></ng-include>
            </li>
            <!-- END users tree -->

        </ul>
    </li>
</ul>