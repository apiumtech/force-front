<widget-wrapper body-class="height-lg no-toolbar"
                wtitle="{{widget.widgetName}}"
                wtooltip="{{ 'tabDistribution.geographicalDistribution.header.title.tooltip' | i18next }}"
                event-bus-channel="eventChannel"
                widget-id="widget.widgetId">


    <!-- TOOLBAR -->
    <div class="clearfix m-b-10">
        <div class="row">
            <div class="col-xs-6 col-sm-6 col-lg-4">
                <!--<select class="form-control pull left" ng-model="selectedFilter" ng-change="fn.changeFilter(selectedFilter)">
                    <option value="users" ng-disabled="!fn.canDisplayUsersInMap()">{{'MapChart.Users' | i18next}}</option>
                    <option value="checkins">{{'MapChart.CheckIns' | i18next}}</option>
                </select>-->
                <div class="dropdown">
                    <button class="btn btn-default dropdown-toggle"
                            type="button"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false">
                        {{ selectedFilter.name }}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-repeat="filter in filters"
                            ng-class="{active: filter.key===selectedFilter.key}">
                            <a href ng-click="fn.changeFilter(filter)">
                                {{ filter.name }}
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-xs-6 col-sm-6 col-lg-8">
                <div class="pull-right" ng-show="selectedFilter.key!=='users'">
                    <label class="radio-inline"
                           tooltip="{{ 'tabDistribution.geographicalDistribution.toggle.heatMap.tooltip' | i18next }}">
                        <input type="radio" value="HEAT_MAP"
                               ng-model="selectedMapType"
                               ng-click="fn.selectMapType('HEAT_MAP')"> {{ 'tabDistribution.geographicalDistribution.radioButton.heatMap' | i18next }}
                    </label>
                    <label class="radio-inline"
                           tooltip="{{ 'tabDistribution.geographicalDistribution.toggle.pointMap.tooltip' | i18next }}">
                        <input type="radio" value="POINT_MAP"
                               ng-model="selectedMapType"
                               ng-click="fn.selectMapType('POINT_MAP')"> {{ 'tabDistribution.geographicalDistribution.radioButton.pointMap' | i18next }}
                    </label>
                </div>
            </div>
        </div>
    </div>
    <!-- END TOOLBAR -->


    <!-- CONTENT -->
    <div class="row panel-content height-lg" ng-hide="data.serverError===true || data.noData">
        <div class="panel-content-child col-xs-12 height-lg">
            <div class="chart-place-holder map-chart height-lg"></div>
        </div>
    </div>

    <!-- DESCRIPTION -->
    <div class="row panel-description" ng-hide="data.serverError===true">
        <div class="col-xs-12 m-t-10 p-l-20 p-r-20">
            <div class="well" ng-if="selectedFilter.key=='checkins'">
                <p ng-i18next="[html]tabDistribution.geographicalDistribution.check-ins.description"></p>
            </div>
            <div class="well" ng-if="selectedFilter.key=='users'">
                <p ng-i18next="[html]tabDistribution.geographicalDistribution.salesTeam.description"></p>
            </div>
        </div>
    </div>


    <!-- ERROR -->
    <ng-include src="'app/modules/saleAnalytics/base/serverErrorAlert.html?v='+cacheBuster" ng-if="data.serverError===true"></ng-include>



    <!--
        TEMPLATES
    -->

    <div style="display:none;">
        <!--
            User Callout Template
        -->
        <div id="userCalloutTemplate" style="width:250px;height:90px;">
            <table style="width:100%;height:100%;">
                <tr>
                    <td rowspan="2" style="width:70px;vertical-align:middle;text-align:center;">
                        <img src="{PhotoUrl}" style="width:50px;height:50px;border-radius:25px;" />
                    </td>
                    <td style="width:180px;height:45px;vertical-align:bottom;color:#226EB4;font-size:15px;font-weight:400;">{FullName}</td>
                </tr>
                <tr>
                    <td style="width:180px;height:45px;vertical-align:top;color:#636363;font-size:13px;">{Description}</td>
                </tr>
            </table>
        </div>

        <!--
            Checkins Callout Template
        -->
        <div id="checkinsCalloutTemplate" style="width:250px;height:90px;">
            <table style="width:100%;height:100%;">
                <tr>
                    <td rowspan="2" style="width:70px;vertical-align:middle;text-align:center;">
                        <img src="{PhotoUrl}" style="width:50px;height:50px;border-radius:25px;" />
                    </td>
                    <td style="width:180px;height:45px;vertical-align:bottom;color:#226EB4;font-size:15px;font-weight:400;">{FullName}</td>
                </tr>
                <tr>
                    <td style="width:180px;height:45px;vertical-align:top;color:#636363;font-size:13px;">{Description}</td>
                </tr>
            </table>
        </div>
    </div>


</widget-wrapper>