<widget-wrapper body-class="table-chart-widget"
                title="{{widget.widgetName}}"
                event-bus-channel="eventChannel"
                widget-id="widget.widgetId">

    <div ng-hide="data.serverError===true">
        <div class="btn-group m-r-5 m-b-5  pull-right" is-open="filterDropdown"
             dropdown>
            <a data-toggle="dropdown" href="javascript:"
               class="btn btn-default btn-sm dropdown-toggle" dropdown-toggle>
                {{'TableWidget.AddColumns' | i18next}}
                <span class="caret"></span>
            </a>
            <ul class="dropdown-menu pull-right">
                <li class="text-link">
                    <a ng-click="fn.restoreColumnDisplay()"
                       class="btn-link">
                        {{'TableWidget.RestoreDefault' | i18next}}
                    </a>
                </li>
                <li class="divider"></li>


                <li ng-repeat="column in columns" ng-if="column.available">
                    <input type="checkbox"
                           class="pull-left m-t-10 m-r-10 "
                           ng-checked="column.visible"
                           ng-click="fn.toggleColumn(column, $event)">

                    <div class="media-body"
                         ng-click="fn.toggleColumn(column, $event)">
                        <p>{{column.name}}</p>
                    </div>
                </li>
            </ul>
        </div>

        <!-- dropdown-->


        <div class="col-xs-12 table-responsive m-t-20">
            <table class="table table-striped  table-picture-40">
                <thead>
                    <tr>
                        <th ng-repeat="column in columns" ng-if="column.available && column.visible">
                            <a class="btn-link" ng-click="fn.sortColumnBy(column, $event)" ng-if="column.sortable">
                                {{ column.name }}
                                <i ng-class="{
                                        'fa fa-sort':      sortingState.column !== column.key,
                                        'fa fa-sort-asc':  sortingState.column === column.key && sortingState.asc,
                                        'fa fa-sort-desc': sortingState.column === column.key && sortingState.desc
                                    }"
                                />
                            </a>
                            <span ng-if="!column.sortable">{{ column.name }}</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="gradeX" ng-repeat="record in dataSource">
                        <td ng-repeat="field in record track by $index" ng-class="{'photo': fn.isImage(field)}">
                            <div ng-if="fn.isImage(field)" class="img-user">
                                <img ng-src="{{field}}" class="media-object" alt=""/>
                            </div>
                            <p class="m-t-10" ng-if="!fn.isImage(field)">{{field}}</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <ng-include
            src="'app/modules/saleAnalytics/base/serverErrorAlert.html'"
            ng-if="data.serverError===true">
    </ng-include>

</widget-wrapper>