<div class="serverError empty-search" ng-show="serverError">
    <h4>Oops! Hubo un error</h4>
    <p>{{errorMessage}}</p>
    <button class="btn btn-refresh" type="button" ng-click="fn.reloadPage()">Refresh</button>
</div>

<widget-wrapper title="Account List"
                event-bus-channel="eventChannel"
                is-reloading="isReloading"
                forever-scroll="fn.requestNextPage()"
                ng-show="!serverError"
        >

    <div ng-show="isEmpty" class="empty-search">
        <img src="assets/img/filter-icon.png" alt=""/>
        <h4>We are sorry, your search did not return any result</h4>
        <p>Did you check if you have any extra filter activated? You can widen your search by removing some filtering criteria on the left. Or check that all words are spelt correctly</p>
    </div>

    <div ng-show="!isEmpty">
        <div class="row" ng-init="fn.initializeChart()">
            <div class="col-md-12">
                <div class="btn-group m-r-5 m-b-5 pull-right">
                    <a href="javascript:;" data-toggle="dropdown" class="btn btn-default btn-sm dropdown-toggle">
                        {{'Account.Table.FIELDS' | i18next}} <span class="caret"></span></a>
                    <ul class="dropdown-menu dropdown-scrollable pull-right">
                        <li class="text-link">
                            <a ng-click="event.onFieldsRestoreDefault();$event.stopPropagation()" class="btn-link">
                                {{'commonText.RestoreDefault' | i18next}}
                            </a>
                        </li>
                        <li class="divider"></li>
                        <li ng-repeat="column in data.availableColumns">
                            <input type="checkbox" class="pull-left m-t-10 m-r-10"
                                   ng-checked="column.visible"
                                   ng-click="event.onToggleColumn(column);$event.stopPropagation()">

                            <div class="media-body"
                                 ng-click="event.onToggleColumn(column);$event.stopPropagation()">
                                <p>
                                    {{column.menuName || column.title || '&nbsp;'}}
                                </p>
                            </div>
                            <div class="clear-fix"></div>
                        </li>
                    </ul>
                </div>
                <button type="button" class="btn btn-default btn-sm  dropdown-toggle pull-right m-r-10"
                        ng-click="data.mapCanvasCollapsed=!data.mapCanvasCollapsed">
                    {{'Account.Table.ShowMap' | i18next}}
                </button>
            </div>
        </div>

        <div collapse="data.mapCanvasCollapsed">
            <div id="map-canvas" class="map-canvas map-account"></div>
        </div>
        <div class="hide googleMapPopupContentTemplate">
            <div class="infoWindow">
                <h4><a href="{{data.accountDetailPage}}">{name}</a></h4>

                <div class="clearfix"></div>
                <div class="info-content">
                    <p>Address: <span>{contactInfo.address}</span></p>

                    <p>City: <span>{contactInfo.city}</span></p>

                    <p>Country: <span>{contactInfo.country}</span></p>
                </div>
            </div>
        </div>

        <div class="hide accountNameColumnTemplate">
            <a href="#/accounts/{id}">
                {name}
            </a>

            <div>
                <div class="edit-delete-div">
                    <a href="#/accounts/{id}/edit"><i class="fa ic-edit"></i>Edit</a> |
                    <a href="" title="Delete Account" class="brand-red-text" function-delete-account><i class="fa ic-trash"></i>Delete</a>
                </div>
            </div>
        </div>
        <div class="hide accountLogoTemplate">
            <a href="{{data.accountDetailPage}}">
                <img ng-src="{avatar}">
            </a>
        </div>
        <div class="table-responsive">
            <table id="data-table"
                   class="table table-striped table-bordered"
                   style="z-index:0;"
                   ng-init="fn.initTable()">
            </table>
        </div>
    </div>
</widget-wrapper>